<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Endora ‚Äì digitaler Concierge ¬∑ Premium Guest Experience</title>
</head>
<body style="margin: 0; padding: 0; background: #000;">

<!-- ===== Endora: Premium Landing Page ===== -->
<div class="apt-landing">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    .apt-landing {
      --bg: #000000;
      --ink: #ffffff;
      --muted: #94a3b8;
      --acc: #10ff88;
      --acc-glow: #00ff7f;
      --card: rgba(15, 15, 15, 0.6);
      --card-border: rgba(16, 255, 136, 0.15);
      --glass: rgba(255, 255, 255, 0.03);
      --qr_size: 160px;
      --bubble_size: 56px;
      --wall2: url('https://d1yei2z3i6k35z.cloudfront.net/12820362/68a47346dc795_ModernCozyLivingRoom.jpeg?width=1920');
      
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      min-height: 100vh;
      background: #000;
      color: var(--ink);
      position: relative;
      overflow-x: hidden;
    }

    /* Animated Background */
    .apt-landing::before {
      content: "";
      position: fixed;
      inset: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(16, 255, 136, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(16, 255, 136, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.08) 0%, transparent 40%),
        linear-gradient(180deg, #000 0%, #0a0a0a 100%);
      z-index: 0;
      animation: backgroundShift 20s ease infinite;
    }

    @keyframes backgroundShift {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.1) rotate(1deg); }
    }

    /* Floating Particles */
    .particles { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
    .particle { position: absolute; width: 2px; height: 2px; background: var(--acc); border-radius: 50%; opacity: 0; animation: float 15s infinite; box-shadow: 0 0 10px var(--acc-glow); }
    @keyframes float { 0%{transform:translateY(100vh) translateX(0);opacity:0} 10%{opacity:1} 90%{opacity:1} 100%{transform:translateY(-100vh) translateX(100px);opacity:0} }

    /* Main Container */
    .apt-container { position: relative; z-index: 2; max-width: 1400px; margin: 0 auto; padding: 40px 20px; }

    /* Hero */
    .hero-section { text-align: center; margin-bottom: 60px; animation: fadeInUp 1s ease; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    .hero-badge { display:inline-block; padding:8px 20px; background:linear-gradient(135deg, rgba(16,255,136,.2), rgba(16,255,136,.05)); border:1px solid var(--card-border); border-radius:50px; font-size:12px; letter-spacing:2px; color:var(--acc); margin-bottom:30px; animation:pulse 2s infinite; text-transform:uppercase }
    @keyframes pulse { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.05);opacity:.9} }
    .hero-title { font-size:clamp(2.5rem,8vw,5rem); font-weight:900; line-height:1.1; margin-bottom:20px; background:linear-gradient(135deg,#fff 0%,var(--acc) 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; text-shadow:0 0 80px rgba(16,255,136,.5) }
    .hero-subtitle { font-size:clamp(1.2rem,3vw,1.5rem); color:var(--muted); max-width:700px; margin:0 auto 40px; line-height:1.6 }

    /* Main grid (stacked) */
    .main-content { display:flex; flex-direction:column; gap:40px; align-items:center }

    /* Features Card */
    .features-card { width:100%; max-width:900px; background:linear-gradient(135deg, var(--card), rgba(16,255,136,.02)); border:1px solid var(--card-border); border-radius:30px; padding:50px 40px; backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px); position:relative; overflow:hidden; animation:fadeInUp 1.2s ease }
    .features-card::before { content:""; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:linear-gradient(45deg, transparent, var(--acc-glow), transparent); opacity:.1; animation:shimmer 3s infinite }
    @keyframes shimmer { 0%{transform:translateX(-100%) translateY(-100%) rotate(45deg)} 100%{transform:translateX(100%) translateY(100%) rotate(45deg)} }
    .section-title { font-size:2rem; font-weight:800; margin-bottom:30px; text-align:center }
    .section-title .emoji { font-size:2.5rem; vertical-align:middle; margin-left:10px; display:inline-block; animation:bounce 2s infinite }
    @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }

    .feature-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; margin-bottom:40px }
    .feature-pill { padding:15px 20px; background:linear-gradient(135deg, rgba(16,255,136,.1), rgba(16,255,136,.02)); border:1px solid rgba(16,255,136,.2); border-radius:20px; font-weight:600; color:var(--acc); text-decoration:none; transition:.3s; text-align:center; position:relative; overflow:hidden }
    .feature-pill:hover { transform:translateY(-5px) scale(1.05); box-shadow:0 10px 40px rgba(16,255,136,.3); border-color:var(--acc) }

    .benefits-list { list-style:none; margin:30px 0; padding:20px; background:rgba(16,255,136,.03); border-radius:20px; border:1px solid rgba(16,255,136,.1) }
    .benefits-list li { padding:15px 0 15px 30px; border-bottom:1px solid rgba(16,255,136,.05); color:#e2e8f0; position:relative; transition:.3s }
    .benefits-list li:last-child{border-bottom:none}
    .benefits-list li::before{content:"‚úì"; position:absolute; left:0; color:var(--acc); font-weight:bold; font-size:1.2rem}
    .benefits-list li:hover{transform:translateX(10px); color:#fff}

    .cta-container{ display:flex; flex-wrap:wrap; gap:20px; justify-content:center; margin-top:40px }
    .cta-primary{ display:inline-flex; align-items:center; gap:10px; padding:18px 35px; background:linear-gradient(135deg, var(--acc), #00cc66); color:#000; font-weight:800; font-size:1.1rem; text-decoration:none; border-radius:50px; transition:.3s; position:relative; overflow:hidden; box-shadow:0 0 40px rgba(16,255,136,.4) }
    .cta-primary:hover{ transform:translateY(-3px) scale(1.05); box-shadow:0 10px 60px rgba(16,255,136,.6) }
    .cta-secondary{ display:inline-flex; align-items:center; gap:10px; padding:18px 35px; background:transparent; color:var(--acc); font-weight:800; font-size:1.1rem; text-decoration:none; border:2px solid var(--acc); border-radius:50px; transition:.3s }
    .cta-secondary:hover{ color:#000; transform:translateY(-3px); box-shadow:0 10px 40px rgba(16,255,136,.4); background:var(--acc) }

    /* Chat Demo Card */
    .chat-demo-card{ width:100%; max-width:900px; background:linear-gradient(135deg, rgba(15,15,15,.8), rgba(16,255,136,.02)); border:1px solid var(--card-border); border-radius:30px; padding:40px; position:relative; overflow:hidden; animation:fadeInUp 1.4s ease }
    .chat-demo-card::before{ content:""; position:absolute; inset:0; background:linear-gradient(rgba(0,0,0,.4), rgba(0,0,0,.4)), var(--wall2); background-size:cover; background-position:center; opacity:.3; z-index:0 }
    .chat-demo-content{ position:relative; z-index:1 }

    /* Chat Window */
    .chat-window{ width:100%; max-width:500px; height:500px; margin:0 auto 30px; background:rgba(10,10,10,.9); border:1px solid rgba(16,255,136,.2); border-radius:20px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,.5); backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px); display:flex; flex-direction:column }
    .chat-header{ background:linear-gradient(90deg, var(--acc), #00cc66); color:#000; padding:15px 20px; font-weight:800; display:flex; align-items:center; justify-content:space-between; font-size:1.1rem }
    .chat-close{ background:transparent; border:none; color:#000; font-size:24px; font-weight:900; cursor:pointer; transition:.3s }
    .chat-close:hover{ transform:rotate(90deg) }
    .chat-messages{ flex:1; overflow-y:auto; padding:20px; background:rgba(5,5,5,.6); display:flex; flex-direction:column; gap:12px }
    .msg{ padding:12px 16px; border-radius:18px; max-width:85%; font-size:14px; line-height:1.5; animation:msgPop .3s ease }
    @keyframes msgPop{ from{transform:scale(.8);opacity:0} to{transform:scale(1);opacity:1} }
    .user{ background:linear-gradient(135deg, rgba(16,255,136,.2), rgba(16,255,136,.1)); align-self:flex-end; color:#fff; border:1px solid rgba(16,255,136,.3) }
    .bot{ background:rgba(255,255,255,.05); align-self:flex-start; color:#e2e8f0; border:1px solid rgba(255,255,255,.1) }
    .chat-input-area{ display:flex; border-top:1px solid rgba(16,255,136,.2); background:rgba(10,10,10,.9) }
    .chat-input{ flex:1; border:none; padding:15px 20px; font-size:14px; background:transparent; color:#fff; outline:none }
    .chat-input::placeholder{ color:rgba(148,163,184,.7) }
    .chat-send{ background:linear-gradient(135deg, var(--acc), #00cc66); color:#000; border:none; padding:0 25px; cursor:pointer; font-weight:800; transition:.3s }
    .chat-send:hover{ background:linear-gradient(135deg, #00ff88, #00ff88) }

    /* QR */
    .qr-section{ display:flex; align-items:center; justify-content:center; gap:30px; margin-top:30px }
    .qr-wrapper{ position:relative; width:var(--qr_size); height:var(--qr_size) }
    .qr-container{ position:absolute; inset:0; background:linear-gradient(135deg, rgba(255,255,255,.95), rgba(255,255,255,.85)); border-radius:24px; padding:15px; box-shadow:0 20px 60px rgba(16,255,136,.3), inset 0 0 20px rgba(16,255,136,.1); display:grid; place-items:center; cursor:pointer; transition:.3s; animation:qrGlow 3s infinite }
    @keyframes qrGlow{ 0%,100%{ box-shadow:0 20px 60px rgba(16,255,136,.3), inset 0 0 20px rgba(16,255,136,.1) } 50%{ box-shadow:0 20px 80px rgba(16,255,136,.5), inset 0 0 30px rgba(16,255,136,.2) } }
    .qr-container:hover{ transform:scale(1.05) }
    .qr-container img{ width:100%; height:100%; object-fit:contain; image-rendering:pixelated; image-rendering:crisp-edges }

    /* Bubble */
    .chat-bubble{ position:absolute; bottom:-10px; right:-10px; width:var(--bubble_size); height:var(--bubble_size); background:linear-gradient(135deg, var(--acc), #00cc66); border-radius:50%; display:grid; place-items:center; cursor:pointer; font-size:24px; box-shadow:0 10px 40px rgba(16,255,136,.5), inset 0 -3px 10px rgba(0,0,0,.2); transition:.3s; animation:bubblePulse 2s infinite; z-index:10 }
    @keyframes bubblePulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.1)} }
    .chat-badge{ position:absolute; top:-5px; right:-5px; background:#ff3366; color:#fff; font-size:12px; font-weight:bold; padding:4px 8px; border-radius:20px; display:none }

    .qr-info{ text-align:center; color:var(--muted); font-size:14px; max-width:300px }
    .qr-info strong{ color:var(--acc); display:block; font-size:16px; margin-bottom:5px }

    /* Popup */
    .popup-wrap{ position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index:1000; display:none; animation:popupIn .3s ease }
    @keyframes popupIn{ from{ transform:translate(-50%,-50%) scale(.8); opacity:0 } to{ transform:translate(-50%,-50%) scale(1); opacity:1 } }
    .popup-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.8); backdrop-filter:blur(5px); -webkit-backdrop-filter:blur(5px); z-index:999; display:none }

    .chat-messages a, .chat-messages a:visited { color: var(--acc); text-decoration: underline }

    @media (max-width: 768px) {
      .features-card, .chat-demo-card { padding:30px 20px }
      .hero-title { font-size:2.5rem }
      .chat-window { height:450px }
      .feature-grid { grid-template-columns:1fr }
    }
    .chat-messages::-webkit-scrollbar{ width:6px }
    .chat-messages::-webkit-scrollbar-track{ background:rgba(255,255,255,.05) }
    .chat-messages::-webkit-scrollbar-thumb{ background:var(--acc); border-radius:3px }
  </style>

  <!-- Animated Particles -->
  <div class="particles">
    <div class="particle" style="left:10%;animation-delay:0s"></div>
    <div class="particle" style="left:20%;animation-delay:2s"></div>
    <div class="particle" style="left:30%;animation-delay:4s"></div>
    <div class="particle" style="left:40%;animation-delay:6s"></div>
    <div class="particle" style="left:50%;animation-delay:8s"></div>
    <div class="particle" style="left:60%;animation-delay:10s"></div>
    <div class="particle" style="left:70%;animation-delay:12s"></div>
    <div class="particle" style="left:80%;animation-delay:14s"></div>
    <div class="particle" style="left:90%;animation-delay:1s"></div>
  </div>

  <div class="apt-container">
    <!-- Hero Section -->
    <div class="hero-section">
      <div class="hero-badge">‚ú® Die Zukunft der G√§stekommunikation</div>
      <h1 class="hero-title">Endora ‚Äì digitaler Concierge</h1>
      <p class="hero-subtitle">Verwandeln Sie Ihre G√§steerfahrung in ein unvergessliches Erlebnis mit KI-gest√ºtztem 24/7 Support</p>
    </div>

    <!-- Main Content Stacked -->
    <div class="main-content">
      <!-- Features Card -->
      <div class="features-card">
        <h2 class="section-title">
          Willkommen bei deinem Endora ‚Äì digitaler Concierge 
          <span class="emoji">üõéÔ∏è</span>
        </h2>
        
        <p style="text-align:center;color:var(--muted);margin-bottom:30px;font-size:1.1rem">
          Frag einfach los ‚Äì zu Check-in, Hausregeln, Ausstattung oder Tipps in der Umgebung. 
          Endora hilft dir sofort weiter.
        </p>

        <div class="feature-grid">
          <div class="feature-pill">üïí 24/7 G√§steservice</div>
          <div class="feature-pill">üçΩÔ∏è Insider-Tipps & Aktivit√§ten</div>
          <div class="feature-pill">üîí Datenschutzfreundlich</div>
          <a class="feature-pill" href="mailto:contact@eudemonia-coaching.de?subject=White%20Label%20ready">üè∑Ô∏è White Label ready</a>
          <a class="feature-pill" href="mailto:contact@eudemonia-coaching.de?subject=Franchise%20Programm">ü§ù Franchise Programm</a>
          <a class="feature-pill" href="mailto:contact@eudemonia-coaching.de?subject=Affiliate-Link%20Datenbank%20%28Services%20%26%20Buchungen%29">üîó Affiliate-Link Datenbank</a>
        </div>

        <ul class="benefits-list">
          <li>WLAN, Parkplatz, Ger√§te-Guides, M√ºll & Recycling</li>
          <li>Beste Restaurants, Str√§nde, Touren & Transport</li>
          <li>Buchbare Extras: Early/Late Check-out, Beauty-Behandlung, Private Chef, Inhouse Massage, Shuttle <strong style="color:var(--acc)">(Es kann sich um Affiliate-Links handeln)</strong></li>
        </ul>

        <div class="cta-container">
          <a class="cta-primary" href="mailto:contact@eudemonia-coaching.de?subject=GPT%20bestellen%20%28inkl.%20Landingpage%29">‚ú® GPT-Bestellen (inkl. Landingpage)</a>
          <a class="cta-secondary" href="mailto:contact@eudemonia-coaching.de?subject=GPT%20bestellen%20%28ohne%20Landingpage%29">üí¨ GPT-Bestellen (ohne Landingpage)</a>
        </div>
      </div>

      <!-- Chat Demo Card -->
      <div class="chat-demo-card" id="openChat">
        <div class="chat-demo-content">
          <h2 class="section-title" style="color:#fff;margin-bottom:40px">
            Live Demo - Erleben Sie die Magie <span class="emoji">‚ú®</span>
          </h2>

          <div class="chat-window" id="inline-chat">
            <div class="chat-header">
              <span>üí¨ Endora ‚Äì digitaler Concierge</span>
              <button class="chat-close" id="inline-close" title="Minimieren" style="display:none">√ó</button>
            </div>
            <div class="chat-messages" id="inline-messages"></div>
            <div class="chat-input-area">
              <input type="text" class="chat-input" id="inline-input" placeholder="Frag z. B.: 'Wo kann ich heute gut essen?'" />
              <button class="chat-send" id="inline-send">Senden</button>
            </div>
          </div>

          <!-- QR Code Section -->
          <div class="qr-section">
            <div class="qr-wrapper">
              <a class="qr-container" id="apt-qr" href="#openChat" title="Scannen zum √ñffnen des Chats">
                <img id="apt-qr-img" alt="QR zum √ñffnen des Chats" />
              </a>
              <div class="chat-bubble" id="bubble-btn" aria-label="Chat √∂ffnen">üí¨
                <span class="chat-badge" id="bubble-badge">1</span>
              </div>
            </div>
            <div class="qr-info">
              <strong>QR-Code scannen</strong>
              Ihre G√§ste k√∂nnen den Chat sofort auf ihrem Smartphone √∂ffnen
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Popup Overlay -->
  <div class="popup-overlay" id="popup-overlay"></div>
  
  <!-- Popup Window -->
  <div class="popup-wrap" id="popup-wrap">
    <div class="chat-window" id="popup-chat">
      <div class="chat-header">
        <span>üí¨ Endora ‚Äì digitaler Concierge</span>
        <button class="chat-close" id="popup-close" title="Schlie√üen">√ó</button>
      </div>
      <div class="chat-messages" id="popup-messages"></div>
      <div class="chat-input-area">
        <input type="text" class="chat-input" id="popup-input" placeholder="Frag z. B.: 'Wie l√§uft der Check-in?'" />
        <button class="chat-send" id="popup-send">Senden</button>
      </div>
    </div>
  </div>
</div>

<!-- TECH: Loader dynamisch einf√ºgen, mit kanonischer data-page-url -->
<script>
  (function(){
    var s = document.createElement('script');
    s.src = '/chat-interface-tech-config/v1/coreloader.js';

    // Client
    var CLIENT_API_ID = 'test_client_f';
    s.setAttribute('data-client-api-id', CLIENT_API_ID);
    s.setAttribute('data-chat-endpoint', 'https://pages.endora.io/api/chat');

    s.setAttribute('data-brand', 'Endora ‚Äì digitaler Concierge');

    // Kanonische URL: origin + pathname (keine Query/Hash)
    var canonical = location.origin + location.pathname;
    s.setAttribute('data-page-url', canonical);

    s.setAttribute('data-start-open', 'false');
    document.body.appendChild(s);
  })();
</script>

<!-- ‚úÖ FIX: QR + Send/Enter wiring (Design bleibt unver√§ndert) -->
<script>
(function(){
  const CLIENT_API_ID = "test_client_f";
  const CHAT_ENDPOINT = "https://pages.endora.io/api/chat?client=" + encodeURIComponent(CLIENT_API_ID);

  const inlineMessages = document.getElementById("inline-messages");
  const inlineInput = document.getElementById("inline-input");
  const inlineSend = document.getElementById("inline-send");

  const popupWrap = document.getElementById("popup-wrap");
  const popupOverlay = document.getElementById("popup-overlay");
  const popupMessages = document.getElementById("popup-messages");
  const popupInput = document.getElementById("popup-input");
  const popupSend = document.getElementById("popup-send");
  const popupClose = document.getElementById("popup-close");

  const bubbleBtn = document.getElementById("bubble-btn");
  const qrImg = document.getElementById("apt-qr-img");
  const qrLink = document.getElementById("apt-qr");

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  }

  function linkifyHtml(text){
    const safe = escapeHtml(text);
    const re = /((https?:\/\/|www\.)[^\s<>"']+)/gi;
    return safe.replace(re, (m)=>{
      const href = m.startsWith("www.") ? ("https://" + m) : m;
      return '<a href="'+escapeHtml(href)+'" target="_blank" rel="noopener">'+escapeHtml(m)+'</a>';
    });
  }

  function addMsg(container, text, who){
    if(!container) return;
    const div = document.createElement("div");
    div.className = "msg " + (who === "user" ? "user" : "bot");
    div.innerHTML = linkifyHtml(text || "");
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }

  async function ask(container, inputEl, sendBtn){
    const text = (inputEl.value || "").trim();
    if(!text) return;

    addMsg(container, text, "user");
    inputEl.value = "";
    sendBtn.disabled = true;

    try{
      const res = await fetch(CHAT_ENDPOINT, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Accept": "application/json, text/plain;q=0.9,*/*;q=0.8"
        },
        body: JSON.stringify({
          message: text,
          url: window.location.href,
          meta: { source: "endora-landing" }
        })
      });

      const ct = (res.headers.get("content-type") || "").toLowerCase();
      let data = null;
      let raw = "";

      if(ct.includes("application/json")){
        try{ data = await res.json(); }catch(_){ data = null; }
      } else {
        try{ raw = await res.text(); }catch(_){ raw = ""; }
        try{ data = JSON.parse(raw); }catch(_){ /* ignore */ }
      }

      const reply =
        (data && (data.reply || data.output || data.answer || data.message || data.text)) ||
        (raw && raw.trim()) ||
        "Keine Antwort erhalten.";

      addMsg(container, String(reply).trim(), "bot");
    } catch(e){
      addMsg(container, "Verbindungsproblem ‚Äî bitte gleich nochmal versuchen.", "bot");
    } finally{
      sendBtn.disabled = false;
    }
  }

  function wireChat(container, inputEl, sendBtn){
    if(!container || !inputEl || !sendBtn) return;

    // Welcome (nur wenn leer)
    if(container.children.length === 0){
      addMsg(container, "Willkommen! üëã Ich bin Endora ‚Äì dein digitaler Concierge. Frag mich alles rund um deinen Aufenthalt.", "bot");
    }

    sendBtn.addEventListener("click", ()=>ask(container, inputEl, sendBtn));
    inputEl.addEventListener("keydown", (e)=>{
      if(e.key === "Enter"){
        e.preventDefault();
        ask(container, inputEl, sendBtn);
      }
    });
  }

  function openPopup(){
    if(popupOverlay) popupOverlay.style.display = "block";
    if(popupWrap) popupWrap.style.display = "block";
    setTimeout(()=>{ try{ popupInput && popupInput.focus(); }catch(_){} }, 50);
  }
  function closePopup(){
    if(popupOverlay) popupOverlay.style.display = "none";
    if(popupWrap) popupWrap.style.display = "none";
  }

  // Wire both chats
  wireChat(inlineMessages, inlineInput, inlineSend);
  wireChat(popupMessages, popupInput, popupSend);

  // Bubble opens popup
  if(bubbleBtn) bubbleBtn.addEventListener("click", openPopup);
  if(popupClose) popupClose.addEventListener("click", closePopup);
  if(popupOverlay) popupOverlay.addEventListener("click", closePopup);

  // QR: make sure it is visible + scannable (hi-res + margin)
  if(qrImg){
    const target = window.location.origin + window.location.pathname + "#openChat";
    qrImg.src = "https://api.qrserver.com/v1/create-qr-code/?size=512x512&margin=16&data=" + encodeURIComponent(target);
  }

  // QR click: scroll to chat + focus
  if(qrLink){
    qrLink.addEventListener("click", function(){
      const el = document.getElementById("openChat");
      if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
      setTimeout(()=>{ try{ inlineInput && inlineInput.focus(); }catch(_){} }, 250);
    });
  }

  // If hash is already #openChat on load
  if(window.location.hash === "#openChat"){
    const el = document.getElementById("openChat");
    if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
    setTimeout(()=>{ try{ inlineInput && inlineInput.focus(); }catch(_){} }, 250);
  }
})();
</script>

</body>
</html>
